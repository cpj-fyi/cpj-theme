{{!< default}}

{{!--
    Essays archive template
    Magazine-style layout with featured essay and grid
    Uses {{#get}} to fetch all posts with essays tag
--}}

<header class="archive-header">
    <div class="container">
        <h1 class="archive-title">Essays</h1>
        {{#if tag.description}}
            <p class="archive-description">{{tag.description}}</p>
        {{else}}
            <p class="archive-description">Longer pieces exploring ideas in depth.</p>
        {{/if}}
        {{#get "posts" filter="tag:essays" limit="100"}}
            <div class="archive-count">{{plural posts.length empty="No essays" singular="% essay" plural="% essays"}}</div>
        {{/get}}
    </div>
</header>

<div class="container">
    <div class="essays-layout">
        <div class="essays-main">
            {{#get "posts" filter="tag:essays" limit="100" include="tags,authors"}}
                {{#if posts}}
                    {{!-- Featured essay (first post) --}}
                    {{#foreach posts from="1" to="1"}}
                        <article class="post-card post-card-featured">
                            <div class="post-card-content">
                                <div class="post-card-tag-wrapper">
                                    {{#foreach tags}}
                                        {{#match slug "essays"}}
                                        {{else match slug "radar"}}
                                        {{else match slug "five-things"}}
                                        {{else}}
                                            <span class="post-card-tag">{{name}}</span>
                                        {{/match}}
                                    {{/foreach}}
                                </div>
                                <h2 class="post-card-title">
                                    <a href="{{url}}">{{title}}</a>
                                </h2>
                                <p class="post-card-excerpt">{{excerpt}}</p>
                                <div class="post-card-meta">
                                    <span>{{date format="MMM D, YYYY"}}</span>
                                    {{#if reading_time}}
                                        <span>{{reading_time}}</span>
                                    {{/if}}
                                </div>
                            </div>
                        </article>
                    {{/foreach}}

                    {{!-- Essays grid --}}
                    <div class="essays-grid">
                        {{#foreach posts from="2"}}
                            {{> "post-card-essay"}}
                        {{/foreach}}
                    </div>
                {{else}}
                    <p>No essays published yet.</p>
                {{/if}}
            {{/get}}
        </div>

        <aside class="sidebar">
            {{> "sidebar"}}
        </aside>
    </div>
</div>
