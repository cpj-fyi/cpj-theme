{{!< default}}

{{!--
    Essays archive template
    Magazine-style layout with featured essay and grid
--}}

<header class="archive-header">
    <div class="container">
        <h1 class="archive-title">Essays</h1>
        {{#if tag.description}}
            <p class="archive-description">{{tag.description}}</p>
        {{else}}
            <p class="archive-description">Longer pieces exploring ideas in depth.</p>
        {{/if}}
        <div class="archive-count">{{plural pagination.total empty="No essays" singular="% essay" plural="% essays"}}</div>
    </div>
</header>

<div class="container">
    <div class="essays-layout">
        <div class="essays-main">
            {{#if posts}}
                {{!-- Featured essay (first post on first page) --}}
                {{#is "paged"}}
                {{else}}
                    {{#foreach posts from="1" to="1"}}
                        <article class="post-card post-card-featured">
                            {{#if feature_image}}
                                <div class="post-card-image">
                                    <a href="{{url}}">
                                        <img src="{{feature_image}}" alt="{{title}}">
                                    </a>
                                </div>
                            {{/if}}
                            <div class="post-card-content">
                                <div class="post-card-tag">Essay</div>
                                <h2 class="post-card-title">
                                    <a href="{{url}}">{{title}}</a>
                                </h2>
                                <p class="post-card-excerpt">{{excerpt}}</p>
                                <div class="post-card-meta">
                                    <span>{{date format="MMM D, YYYY"}}</span>
                                    {{#if reading_time}}
                                        <span>{{reading_time}} min read</span>
                                    {{/if}}
                                </div>
                            </div>
                        </article>
                    {{/foreach}}
                {{/is}}

                {{!-- Essays grid --}}
                <div class="essays-grid">
                    {{#is "paged"}}
                        {{#foreach posts}}
                            {{> "post-card-essay"}}
                        {{/foreach}}
                    {{else}}
                        {{#foreach posts from="2"}}
                            {{> "post-card-essay"}}
                        {{/foreach}}
                    {{/is}}
                </div>
            {{else}}
                <p>No essays published yet.</p>
            {{/if}}
        </div>

        <aside class="sidebar">
            {{> "sidebar"}}
        </aside>
    </div>

    {{pagination}}
</div>
