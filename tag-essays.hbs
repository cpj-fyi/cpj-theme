{{!< default}}

{{!--
    Essays archive template
    Uses consistent essay card styling with bordered metadata
--}}

<header class="archive-header">
    <div class="container">
        <h1 class="archive-title">Essays</h1>
        {{#if tag.description}}
            <p class="archive-description">{{tag.description}}</p>
        {{else}}
            <p class="archive-description">Longer pieces exploring ideas in depth.</p>
        {{/if}}
        {{#get "posts" filter="tag:essays" limit="100"}}
            <div class="archive-count">{{plural posts.length empty="No essays" singular="% essay" plural="% essays"}}</div>
        {{/get}}
    </div>
</header>

<div class="container">
    <div class="essays-archive-layout">
        <div class="essays-archive-feed">
            {{#get "posts" filter="tag:essays" limit="100" include="tags,authors"}}
                {{#if posts}}
                    {{#foreach posts}}
                        <article class="essay-card">
                            <h2 class="essay-card-title">
                                <a href="{{url}}">{{title}}</a>
                            </h2>
                            <p class="essay-card-excerpt">{{excerpt}}</p>
                            <div class="essay-card-meta">
                                {{#foreach tags}}
                                    {{#match slug "essays"}}
                                    {{else match slug "radar"}}
                                    {{else match slug "five-things"}}
                                    {{else}}
                                        {{#if @first}}
                                            <a href="{{url}}" class="essay-meta-tag">{{name}}</a>
                                        {{/if}}
                                    {{/match}}
                                {{/foreach}}
                                <span class="essay-meta-date">{{date format="MM DD YY"}}</span>
                                {{#if reading_time}}
                                    <span class="essay-meta-time">{{reading_time}}</span>
                                {{/if}}
                            </div>
                        </article>
                    {{/foreach}}
                {{else}}
                    <p>No essays published yet.</p>
                {{/if}}
            {{/get}}
        </div>

        <aside class="sidebar">
            {{> "sidebar"}}
        </aside>
    </div>
</div>
